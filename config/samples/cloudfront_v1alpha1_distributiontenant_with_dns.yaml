# DistributionTenant with automatic DNS record management.
# The operator creates CNAME records in Route53 pointing tenant domains
# to the CloudFront distribution (or connection group) endpoint.
# DNS records are created before the tenant and deleted after it.
apiVersion: cloudfront-tenant-operator.io/v1alpha1
kind: DistributionTenant
metadata:
  labels:
    app.kubernetes.io/name: cloudfront-tenant-operator
    app.kubernetes.io/managed-by: kustomize
  name: my-tenant-with-dns
spec:
  distributionId: "E1XNX8R2GOAABC"
  domains:
    - domain: "dns-managed.example.com"

  managedCertificateRequest:
    validationTokenHost: "cloudfront"
    primaryDomainName: "dns-managed.example.com"

  dns:
    provider: route53
    hostedZoneId: "Z1234567890ABC"
    # TTL for CNAME records in seconds (60-172800, default: 300).
    ttl: 300
    # Optional: assume this IAM role for Route53 API calls (cross-account).
    # assumeRoleArn: "arn:aws:iam::999999999999:role/Route53DnsManager"
